---
export interface Props {
	sections?: string[];
	containerType?: 'default' | 'wide' | 'full';
}

const {
	sections = ["intro", "projects", "thoughts", "connect"],
	containerType = 'default'
} = Astro.props;

// Use consistent positioning across all pages
const navClasses = {
	'default': 'fixed left-6 lg:left-12 top-1/2 -translate-y-1/2 z-10 hidden lg:block',
	'wide': 'fixed left-6 lg:left-12 top-1/2 -translate-y-1/2 z-10 hidden lg:block', 
	'full': 'fixed left-6 lg:left-12 top-1/2 -translate-y-1/2 z-10 hidden lg:block'
};
---

<nav class={navClasses[containerType]}>
	<div class="flex flex-col gap-4">
		{sections.map((section) => (
			<button
				data-nav-button={section}
				class="w-2 h-8 rounded-full transition-all duration-500 bg-muted-foreground/30 hover:bg-muted-foreground/60"
				aria-label={`Navigate to ${section}`}
			>
			</button>
		))}
	</div>
</nav>

<script>
	document.addEventListener('DOMContentLoaded', function() {
		// Add smooth scrolling behavior to navigation buttons
		const navButtons = document.querySelectorAll('[data-nav-button]');

		// Update active navigation state
		function updateActiveNav(activeSection) {
			navButtons.forEach(button => {
				const sectionId = button.getAttribute('data-nav-button');
				if (sectionId === activeSection) {
					button.classList.remove('bg-muted-foreground/30', 'hover:bg-muted-foreground/60');
					button.classList.add('bg-foreground');
				} else {
					button.classList.remove('bg-foreground');
					button.classList.add('bg-muted-foreground/30', 'hover:bg-muted-foreground/60');
				}
			});
		}

		navButtons.forEach(button => {
			button.addEventListener('click', () => {
				const sectionId = button.getAttribute('data-nav-button');
				const section = document.getElementById(sectionId);

				if (section) {
					section.scrollIntoView({
						behavior: 'smooth',
						block: 'start'
					});
				}
			});
		});

		// Listen for active section changes
		window.addEventListener('activeSectionChange', (event) => {
			updateActiveNav(event.detail.sectionId);
		});
	});
</script>